# v0.1 技術メモ

このドキュメントは、Drive Distance Tracker の **v0.1 プロトタイプ** に必要な  
最小限の技術要素を整理したものです。

v0.1 の目的は **GPSを使って走行距離を計測し、画面に表示できることを確認する** ことであり、  
実運用レベルの完成度は求めません。

---

## 1. GPS取得

### 使用する技術
- ブラウザの Geolocation API  
  - `navigator.geolocation`

### 取得するデータ
- 緯度（latitude）
- 経度（longitude）
- 取得時刻（timestamp）

### 取得方法（v0.1）
- 「記録開始」ボタンを押したら GPS 取得を開始
- 一定間隔で位置情報を取得（例：30〜60秒）
- 「記録終了」ボタンを押したら GPS 取得を停止

### v0.1 では考慮しないこと
- バックグラウンドでの位置取得
- 省電力制御
- 高精度／低精度の切り替え

※ まずは **GPSが安定して取得できること** を最優先とする。

---

## 2. 距離計算

### 基本方針
- 連続する GPS 座標同士の距離を計算
- 各区間の距離を合算して、1日の走行距離とする

### 距離計算方法
- **Haversine（ハバーサイン）式** を使用
  - 地球上の2点間距離を求める一般的な計算式
  - 精度と実装のバランスが良い

### v0.1 での割り切り
- GPS の微小な誤差は許容する
- 停車中の細かな移動は除外しない
- ノイズ除去や補正処理は行わない

※ **実務で「だいたい合う」レベルで十分** とする。

---

## 3. 状態管理

### 管理する状態
- 記録中かどうか（true / false）
- 取得した GPS 座標の配列
- 記録開始時刻
- 記録終了時刻

### 保存方法（v0.1）
- メモリ上のみで管理
- ページをリロードするとデータは消える（問題なし）

---

## 4. 画面（UI）要件

### 必要なUI要素
- 「記録開始」ボタン
- 「記録終了」ボタン
- 現在の状態表示（例：「記録中」）
- 結果表示  
  - `本日の走行距離：◯◯ km`

### v0.1 で不要なUI
- ログイン機能
- 履歴表示
- 日付選択
- 設定画面

---

## 5. ファイル構成（最小）

### v0.1 の最小構成

/
├ index.html
├ style.css
└ app.js

### 各ファイルの役割
- `index.html`  
  - ボタンや表示領域などのUI
- `style.css`  
  - 最低限のスタイル
- `app.js`  
  - GPS取得処理
  - 距離計算
  - 状態管理

---

## 6. v0.1 でやらないこと（明示）

以下は **意図的に v0.1 では実装しない**。

- Excel への書き込み
- 月の左右15日レイアウト対応
- 自動開始・自動終了
- バックグラウンド GPS 取得
- Cloud API やバックエンド処理

---

## 7. 技術的な成功条件

v0.1 プロトタイプは、以下を満たせば成功とする。

- スマホのブラウザで動作する
- GPS 位置情報が取得できる
- 走行距離が計算される
- 記録終了時に走行距離が画面に表示される

すべて満たせば、v0.1 は完了。
